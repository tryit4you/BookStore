var config={pageSize:16,pageIndex:1},homeScripts={Init:function(){homeScripts.loadData();homeScripts.registerEvent()},registerEvent:function(){$(".btn-search").off("click").on("click",function(){homeScripts.loadData(!0)});$("#txtSearch").keypress(function(n){n.keyCode===13&&homeScripts.loadData(!0)});$("#txtSearch").on("click",function(){$("#txtSearch").val("")});$(".btnPause").on("click",function(n){n.preventDefault();$(".btnPause > .fa-pause").length===1?($(".btnPause > .fa").removeClass("fa-pause"),$(".btnPause > .fa").addClass("fa-play"),document.getElementById("marquee").stop()):$(".btnPause > .fa-pause").length===0&&($(".btnPause > .fa").removeClass("fa-play"),$(".btnPause > .fa").addClass("fa-pause"),document.getElementById("marquee").start())})},loadData:function(n){var t=$("#txtSearch").val();$.ajax({url:"/books/GetAll",type:"POST",data:{filter:t,page:config.pageIndex,pageSize:config.pageSize},dataType:"json",success:function(t){var i,r,u;t.status&&(i=t.data,t.filter!==null&&i.length===0&&(toastr.clear(),toastr.info("Không có kết quả nào cho từ khóa '"+t.filter+"'")),r="",u=$("#data-template").html(),$.each(i,function(n,t){var i="/v/"+t.metaName+"/"+t.id+"/";r+=Mustache.render(u,{url:i,name:t.name,thumbnailUrl:t.thumbnailUrl,downloads:commonController.countDownload(t.countDownload),dateRelease:t.dateRelease,Language:commonController.language(t.language)})}),$("#data-render").html(r),homeScripts.paging(t.total,t.page,function(){homeScripts.loadData()},n))}})},paging:function(n,t,i){$("#pagination a").length===0&&($("#pagination").empty(),$("#pagination").removeData("pagination"),$("#pagination").unbind("page"));$("#pagination").pagination({items:n,itemsOnPage:config.pageSize,currentPage:t,hrefTextPrefix:"#trang-",prevText:"&lt",nextText:"&gt;",cssStyle:"light-theme",onPageClick:function(n){config.pageIndex=n;currentPage=n;setTimeout(i,0)}})}};homeScripts.Init();