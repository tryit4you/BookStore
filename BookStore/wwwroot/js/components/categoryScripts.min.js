var config={pageSize:16,pageIndex:1},categoryScripts={Init:function(){categoryScripts.loadData();categoryScripts.registerEvent()},registerEvent:function(){$(".btn-search").off("click").on("click",function(){categoryScripts.loadData(!0)});$("#txtSearch").keypress(function(n){n.keyCode===13&&categoryScripts.loadData(!0)});$("#txtSearch").on("click",function(){$("#txtSearch").val("")})},loadData:function(n){var t=$(".hiddenId").val(),i=$("#txtSearch").val();$.ajax({url:"/books/GetByCategory",type:"POST",data:{id:t,filter:i,page:config.pageIndex,pageSize:config.pageSize},dataType:"json",success:function(t){var i,r,u,f;t.status&&(i=t.data,t.filter!==null&&i.length===0&&(toastr.clear(),toastr.info("Không có kết quả nào cho từ khóa '"+t.filter+"'")),r="",u=$("#data-template").html(),$.each(i,function(n,t){var i="/v/"+t.metaName+"/"+t.id+"/";r+=Mustache.render(u,{url:i,name:t.name,thumbnailUrl:t.thumbnailUrl,downloads:commonController.countDownload(t.countDownload),dateRelease:t.dateRelease,Language:commonController.language(t.language)})}),$("#data-render").html(r),f=Math.ceil(t.total/config.pageSize),categoryScripts.paging(t.total,t.page,function(){categoryScripts.loadData();$("#currentpage").html(config.pageIndex);$("#totalpage").html(f)},n),categoryScripts.registerEvent())}})},paging:function(n,t,i){$("#pagination").pagination({items:n,itemsOnPage:config.pageSize,currentPage:t,hrefTextPrefix:"#trang-",prevText:"&lt",nextText:"&gt;",cssStyle:"light-theme",onPageClick:function(n){config.pageIndex=n;currentPage=n;setTimeout(i,0)}})}};categoryScripts.Init();