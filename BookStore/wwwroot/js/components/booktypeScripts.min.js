var config={pageSize:16,pageIndex:1},booktypeScripts={Init:function(){booktypeScripts.loadData();booktypeScripts.registerEvent()},registerEvent:function(){$(".booktypeLink").off("click").on("click",function(){loadData()});$(".btn-search").off("click").on("click",function(){booktypeScripts.loadData(!0)});$("#txtSearch").keypress(function(n){n.keyCode===13&&booktypeScripts.loadData(!0)});$("#txtSearch").on("click",function(){$("#txtSearch").val("")})},loadData:function(n){var t=$(".booktype").val(),i=$("#txtSearch").val();$.ajax({url:"/books/GetByType",type:"POST",data:{id:t,filter:i,page:config.pageIndex,pageSize:config.pageSize},dataType:"json",success:function(t){var r;if(t.status){var u=t.data,i="",f=$("#data-template").html();$.each(u,function(n,t){var r="/v/"+t.metaName+"/"+t.id+"/";i+=Mustache.render(f,{url:r,name:t.name,thumbnailUrl:t.thumbnailUrl,downloads:commonController.countDownload(t.countDownload),dateRelease:t.dateRelease,Language:commonController.language(t.language)})});$("#data-render").html(i);r=Math.ceil(t.total/config.pageSize);booktypeScripts.paging(t.total,t.page,function(){booktypeScripts.loadData();$("#currentpage").html(config.pageIndex);$("#totalpage").html(r)},n);booktypeScripts.registerEvent()}}})},paging:function(n,t,i){$("#pagination a").length===0&&($("#pagination").empty(),$("#pagination").removeData("pagination"),$("#pagination").unbind("page"));$("#pagination").pagination({items:n,itemsOnPage:config.pageSize,currentPage:t,hrefTextPrefix:"#trang-",prevText:"&lt",nextText:"&gt;",cssStyle:"light-theme",onPageClick:function(n){config.pageIndex=n;currentPage=n;setTimeout(i,0)}})}};booktypeScripts.Init();